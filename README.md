# ITMenu

Меню для ИТ поддержки на основе AGI Asterisk <br>

## Установка <br>
* Полагаем, что содержимое репозитария скопировано в `/var/itmenu/` <br>
* Проверить, что на команду в bash `/usr/bin/python3 -V` показывается версия Python. 
Если нет, выполнить команды ниже <br>
`rm /usr/bin/python3` <br>
`ln -s /usr/bin/python3.6 /usr/bin/python3` <br>
Где `/usr/bin/python3.6` - путь до актуального бинарника python на сервере <br>
* Установить необходимые пакеты python `pip install -r requirements.txt` <br>
 * Сделать файл исполняемым `chmod +x it_menu.py` и дать права на папку records пользователю asterisk `chmod 777 records` <br>
 * В файле extensions.conf или его аналоге добавить строку запуска AGI при звонке на нужный номер,
 например `exten => 1995,1,AGI(/var/itmenu/it_menu.py)`, где 1995 - вызываемый номер
 
 ## Изменение голосового меню <br>
 Сама структура меню задается в функции `structure_menu`, после изменения пунктов, разумеется, необходимо будет перегенерировать голосовые файлы. Они были сделаны штатным движком Mac OS 10.15 Catalina со скоростью чтения чуть выше средней (через команду `say` в терминале) и перекодировано в файлы wav с частотой дискретизации в 8кГц и моноканале с форматом PCM A-law